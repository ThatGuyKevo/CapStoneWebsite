{"ast":null,"code":"import _regeneratorRuntime from\"/Users/thatguykev/Desktop/eCommerce-Website/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/thatguykev/Desktop/eCommerce-Website/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/thatguykev/Desktop/eCommerce-Website/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useContext}from\"react\";import{Store}from'../Store';import{Helmet}from'react-helmet-async';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import MessageBox from\"../components/MessageBox\";import ListGroup from'react-bootstrap/ListGroup';import Button from'react-bootstrap/Button';import Card from'react-bootstrap/Card';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(){var navigate=useNavigate();var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var cartItems=state.cart.cartItems;var updateCartHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(item,quantity){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/products/\".concat(item._id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(!(data.countInStock<quantity)){_context.next=7;break;}window.alert('Sorry. Product is out of stock');return _context.abrupt(\"return\");case 7:ctxDispatch({type:'CART_ADD_ITEM',payload:_objectSpread(_objectSpread({},item),{},{quantity:quantity})});case 8:case\"end\":return _context.stop();}}},_callee);}));return function updateCartHandler(_x,_x2){return _ref.apply(this,arguments);};}();var removeItemHandler=function removeItemHandler(item){ctxDispatch({type:'CART_REMOVE_ITEM',payload:item});};var checkoutItemHandler=function checkoutItemHandler(item){navigate('/signin?redirect=/shipping');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Shopping Cart\"})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Cart is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\" Go Shopping \"})]}):/*#__PURE__*/_jsx(ListGroup,{children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"img-fluid rounded img-thumbnail\"}),' ',/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.slug),children:item.name})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return updateCartHandler(item,item.quantity-1);},disable:item.quantity===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus-circle\"})}),' ',/*#__PURE__*/_jsx(\"span\",{children:item.quantity}),' ',/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return updateCartHandler(item,item.quantity+1);},disable:item.quantity===item.countInStock,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"})}),' ']}),/*#__PURE__*/_jsxs(Col,{md:3,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return removeItemHandler(item);},variant:\"light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item._id);})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"Subtotal (\",cartItems.reduce(function(a,c){return a+c.quantity;},0),' ',\"items) : $\",cartItems.reduce(function(a,c){return a+c.price*c.quantity;},0)]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"primary\",onClick:checkoutItemHandler,disable:cartItems.length===0,children:\"Proceed to Checkout\"})})})]})})})})]})]});}","map":{"version":3,"names":["useContext","Store","Helmet","Row","Col","MessageBox","ListGroup","Button","Card","Link","useNavigate","axios","CartScreen","navigate","state","ctxDispatch","dispatch","cartItems","cart","updateCartHandler","item","quantity","get","_id","data","countInStock","window","alert","type","payload","removeItemHandler","checkoutItemHandler","length","map","image","name","slug","price","reduce","a","c"],"sources":["/Users/thatguykev/Desktop/eCommerce-Website/client/src/screens/CartScreen.js"],"sourcesContent":["import { useContext } from \"react\";\nimport { Store } from '../Store';\nimport { Helmet } from 'react-helmet-async';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport MessageBox from \"../components/MessageBox\";\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\nimport { Link, useNavigate} from 'react-router-dom';\nimport axios from 'axios';\n\nexport default function CartScreen() {\n    const navigate = useNavigate();\n    const {state, dispatch: ctxDispatch } = useContext(Store);\n    const {\n        cart: {cartItems } ,\n    } = state;\nconst updateCartHandler = async(item, quantity) => {\n    const { data } = await axios.get(`/api/products/${item._id}`);\n    if (data.countInStock < quantity) {\n        window.alert('Sorry. Product is out of stock');\n        return;\n    }\n\n    ctxDispatch({\n        type:'CART_ADD_ITEM',\n        payload: {...item, quantity},\n    });\n    };\n    const removeItemHandler = (item) => {\n        ctxDispatch({ type: 'CART_REMOVE_ITEM', payload: item });\n    };\n\n    const checkoutItemHandler = (item) => {\n        navigate('/signin?redirect=/shipping');\n    };\n\nreturn (\n    <div>\n        <Helmet>\n            <title>Shopping Cart</title>\n        </Helmet>\n        <h1>Shopping Cart</h1>\n        <Row>\n            <Col md={8}>\n                {cartItems.length === 0 ? (\n                    <MessageBox>\n                        Cart is empty. <Link to='/'> Go Shopping </Link>\n                    </MessageBox>\n                ):\n                (\n                    <ListGroup>\n                        {cartItems.map((item) => (\n                            <ListGroup.Item key={item._id}>\n                                <Row className=\"align-items-center\">\n                                    <Col md={4}>\n                                        <img\n                                            src={item.image}\n                                            alt={item.name}\n                                            className=\"img-fluid rounded img-thumbnail\"\n                                        ></img>{' '}\n                                        <Link to={`/product/${item.slug}`}>{item.name}</Link>\n                                    </Col>\n                                    <Col md={3}>\n                                        <Button variant='light' \n                                            onClick={() => updateCartHandler(item, item.quantity -1)\n                                            }\n                                            disable={item.quantity === 1}>\n                                            <i className=\"fas fa-minus-circle\"></i>\n                                        </Button>{' '}\n                                        <span>{item.quantity}</span>{' '}\n                                        <Button \n                                            variant='light' \n                                            onClick={() => updateCartHandler(item, item.quantity +1)\n                                            }\n                                            disable={item.quantity === item.countInStock}>\n                                            <i className=\"fas fa-plus-circle\"></i>\n                                        </Button>{' '}\n                                    </Col>\n                                    <Col md={3}>${item.price}</Col>\n                                    <Col md={2}>\n                                        <Button \n                                            onClick={() => removeItemHandler(item)}\n                                            variant=\"light\">\n                                            <i className=\"fas fa-trash\"></i>\n                                        </Button>\n                                    </Col>\n                                </Row>\n                            </ListGroup.Item>\n                        ))}\n                    </ListGroup>\n                )\n            }\n            </Col>\n            <Col md={4}>\n            <Card>\n                <Card.Body>\n                    <ListGroup variant='flush'>\n                        <ListGroup.Item>\n                            <h3>\n                                Subtotal ({cartItems.reduce((a,c) => a + c.quantity, 0)}{' '}items)\n                                : $\n                                {cartItems.reduce((a,c) => a + c.price * c.quantity, 0)}\n                            </h3>\n                        </ListGroup.Item>\n                        <ListGroup.Item>\n                            <div className=\"d-grid\">\n                                <Button\n                                type=\"button\"\n                                variant=\"primary\"\n                                onClick={checkoutItemHandler}\n                                disable={cartItems.length ===0}\n                                >\n                                    Proceed to Checkout\n                                </Button>\n                            </div>\n                        </ListGroup.Item>\n                    </ListGroup>\n                </Card.Body>\n            </Card>\n            </Col>\n        </Row>\n    </div>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}